<!DOCTYPE html>
<html>
<head>
    <title>pang</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            font-family: monospace;
            background: #c3d4de;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        #terminal {
            font-size: 30px;
            line-height: 1;
            letter-spacing: 3px;
            text-align: center;
            white-space: pre;
			background-image: linear-gradient(#e9f0f5, #f5eae4);
            padding: 20px;
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <div id="terminal"></div>

    <script>
        // Fixed 30x30 grid
        const COLS = 30;
        const ROWS = 30;
        const FRAME_RATE = 105;
        const SCROLL_SPEED = 0.1;
        
        // Pastel terrain types
        const TERRAIN_TYPES = [
            { name: 'water', chars: ['~'], color: '#a8d8ea', weight: 0.4, height: -1 },
            { name: 'sand', chars: ['.'], color: '#b5ab88', weight: 0.1, height: 0 },
            { name: 'grass', chars: ['*'], color: '#79ab87', weight: 0.3, height: 1 },
            { name: 'forest', chars: ['â™ '], color: '#668256', weight: 0.15, height: 2 },
            { name: 'mountain', chars: ['^'], color: '#ccb4b4', weight: 0.05, height: 3 }
        ];

        class ScrollingTerrain {
            constructor() {
                this.grid = Array(ROWS).fill().map(() => 
                    Array(COLS).fill().map(() => this.randomTerrain())
                );
                this.scrollOffset = 0;
                this.clusterStrength = 0.7;
            }
            
            randomTerrain() {
                const totalWeight = TERRAIN_TYPES.reduce((sum, t) => sum + t.weight, 0);
                let random = Math.random() * totalWeight;
                let weightSum = 0;
                
                for (const terrain of TERRAIN_TYPES) {
                    weightSum += terrain.weight;
                    if (random <= weightSum) return terrain;
                }
                return TERRAIN_TYPES[0];
            }
            
            update() {
                this.scrollOffset += SCROLL_SPEED;
                
                // When we've scrolled one full row
                if (this.scrollOffset >= 1) {
                    this.scrollOffset = 0;
                    this.grid.shift(); // Remove top row
                    this.grid.push(this.generateNextRow()); // Add new bottom row
                }
            }
            
            generateNextRow() {
                const newRow = [];
                const lastRow = this.grid[this.grid.length-1];
                
                for (let x = 0; x < COLS; x++) {
                    // Get neighbors for clustering
                    const left = newRow[x-1] || lastRow[x];
                    const above = lastRow[x];
                    
                    // Combine influences
                    if (Math.random() < this.clusterStrength) {
                        newRow.push(Math.random() < 0.6 ? left : above);
                    } else {
                        newRow.push(this.randomTerrain());
                    }
                }
                
                return newRow;
            }
            
            render() {
                let output = '';
                
                for (let y = 0; y < ROWS; y++) {
                    // Calculate vertical position with scroll offset
                    const renderY = y - this.scrollOffset;
                    
                    // Only render visible rows
                    if (renderY >= -1 && renderY < ROWS) {
                        for (let x = 0; x < COLS; x++) {
                            const terrain = this.grid[y][x];
                            output += `<span style="color:${terrain.color}">${terrain.chars[0]}</span>`;
                        }
                        output += '\n';
                    }
                }
                
                document.getElementById('terminal').innerHTML = output;
            }
        }

        // Initialize and run
        const terrain = new ScrollingTerrain();
        
        function gameLoop() {
            terrain.update();
            terrain.render();
            requestAnimationFrame(gameLoop);
        }
        
        // Start the animation
        gameLoop();
    </script>
</body>
</html>